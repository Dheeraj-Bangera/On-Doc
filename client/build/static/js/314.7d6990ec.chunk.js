"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[314],{8314:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var r=t(4165),c=t(5861),o=t(9439),s=t(2791),a=t(7689),i=t(1087),l=t(3263),u=t(184),d=function(){var e=(0,s.useState)(!1),n=(0,o.Z)(e,2),t=n[0],d=n[1],g=(0,s.useState)(null),f=(0,o.Z)(g,2),h=f[0],p=f[1],m=(0,s.useState)(!1),x=(0,o.Z)(m,2),v=x[0],Z=x[1],j=(0,s.useState)(""),b=(0,o.Z)(j,2),y=b[0],k=b[1],C=(0,s.useState)(""),w=(0,o.Z)(C,2),S=w[0],E=w[1],N=(0,s.useState)(10),I=(0,o.Z)(N,2),L=I[0],F=I[1];(0,a.s0)();(0,s.useEffect)((function(){T(),M(),O()}),[]);var T=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var n=e.coords,t=n.latitude,r=n.longitude;p({latitude:t,longitude:r}),d(!0)}),(function(e){console.error("Error getting location:",e),d(!1)})):(console.error("Geolocation is not supported by this browser."),d(!1))},M=function(){var e=localStorage.getItem("token");Z(!!e)},O=function(){var e=setInterval((function(){F((function(e){return e-1}))}),1e3);setTimeout((function(){clearInterval(e),t?v?P():(D(),alert("Please log in to start a chat.")):v?A():E("108")}),1e4)},P=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.post("/emergency/sendLocation",{latitude:h.latitude,longitude:h.longitude});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error sending emergency notification:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"123456",e.next=4,l.Z.post("/emergency/sendUserId",{userId:"123456"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error sending user id:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.post("/emergency/sendLocation",{latitude:h.latitude,longitude:h.longitude});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error sending location:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-bar",children:[(0,u.jsx)(i.OL,{to:"/",className:"btn",children:"Home"}),!v&&(0,u.jsx)(i.OL,{to:"/login",className:"btn",children:"Login"})]}),(0,u.jsx)("section",{className:"emergency-section flex-center",children:(0,u.jsxs)("div",{className:"emergency-container flex-center",children:[(0,u.jsx)("h2",{children:"Emergency Assistance"}),(0,u.jsxs)("p",{children:["Time remaining: ",L," seconds"]}),t&&(0,u.jsxs)(u.Fragment,{children:[v&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("button",{onClick:P,className:"btn",children:"Call Emergency"})}),S&&(0,u.jsxs)("p",{children:["Call emergency number: ",S]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"Doctor's Console"}),(0,u.jsx)("textarea",{value:y,onChange:function(e){k(e.target.value)},placeholder:"Type your message to the client..."}),(0,u.jsx)("button",{onClick:function(){alert("Message sent to client: ".concat(y)),k("")},className:"btn",children:"Send Message to Client"})]})]})]})})]})}}}]);
//# sourceMappingURL=314.7d6990ec.chunk.js.map